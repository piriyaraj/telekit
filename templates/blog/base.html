{% load static %}
<!DOCTYPE html>
<html lang="en-US">
    
<head>
        <!-- seo tags -->
        {%if seo.title|length%}
            {% include "components/seo.html" %}
        {% else %}
            {% block seo %}{% endblock %}
        {% endif %}
        <!-- end of seo -->


        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="{% static 'images/logo/telekit_favicon.png' %}" />
        <link rel="apple-touch-icon" href="{% static 'images/logo/telekit_apple_icon.png' %}">




        <!--start-dropdown-->



        <link rel="stylesheet" type="text/css" href="{% static 'css/style.css' %}"/>
        <link rel="stylesheet" type="text/css" href="{% static 'css/main.css' %}"/>
        <link rel="stylesheet" type="text/css" href="{% static 'css/my.css' %}"/>

        <script src="{% static 'js/my.js' %}"></script>
        <script src="{% static 'js/htmx.min.js' %}"></script>
        <script src="{% static 'js/jquery.min.js' %}"></script>
        <script type="text/javascript">

            $(document).ready(function () {
                $('#box').animate({'top': '-700px'}, 500);
                //Hide (Collapse) the toggle containers on load
                $(".toggle_container").hide();
                //Switch the "Open" and "Close" state per click then slide up/down (depending on open/close state)
                $(".trigger").click(function () {
                    $(this).toggleClass("active").next().slideToggle("slow");
                    return false; //Prevent the browser jump to the link anchor
                });
            });

            var $ = jQuery.noConflict();
            $(function () {
                $('#activator').click(function () {
                    $('#box').animate({'top': '0px'}, 500);
                });
                $('#boxclose').click(function () {
                    $('#box').animate({'top': '-700px'}, 500);
                });
            });
        </script>
        {% include "components/headerscript.html" %}
</head>
<body onload="">
    {% include "header.html" %}
    {% if alertmsg%}
    <div class='alertmsg' style="background-color: {{alertmsgbgcolor}};">
            <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span> 
            {{alertmsg}}
    </div>
    {% endif %}
    {% block content %}{% endblock %}


<!--//wookmark-scripts-->
<!--start-footer-->
<div style="position: fixed;
     bottom: 10px;
     right: 10px;">
    <a class="addbtn" href="/addgroup" title="Add New Telegram Group">+ Add Telegram Group</a>
</div>


{% comment %} {% include "components/timer.html"%} {% endcomment %}
<!--//End-footer-->
{% include "footer.html" %}
<!--//End-wrap-->
<script src="{% static 'js/bottom.js' %}"></script>

<script>
    async function refreshData(button) {
        const linkId = button.dataset.linkId; // Fetch the linkId from the button's dataset
    
        // Change the button text and color to "Updating..." and grey during the fetch operation
        button.innerText = "Updating...";
        button.style.backgroundColor = "#808080";
    
        const response = await fetch(`/refresh/${linkId}`);
    
        if (!response.ok) {
            alert("Error: " + response.status);
            // Change the button text and color back to original after an error
            button.innerText = "Update";
            button.style.backgroundColor = "#0088cc";
            return;
        }
    
        const data = await response.json();
        var div = document.getElementById(linkId);
    
        // Get the h2 child of the div
        var h2 = div.querySelector("h2");
        var member_count = div.querySelector("#member-count");
        var descri = div.querySelector(".descri");
        h2.innerText = data.name;
        member_count.innerText = data.count;
        descri.innerText = data.description;
        // Change the button text and color to "Updated" and green after successful fetch operation
        button.innerText = "Updated";
        button.style.backgroundColor = "#008000";
    }
    
</script>

</body>
</html>